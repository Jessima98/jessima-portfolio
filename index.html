// Enter key support
document.addEventListener("keydown", function(e){
  if(e.key === "Enter" && document.getElementById("aiBox").style.display === "block"){
    sendAI();
  }
});

function sendAI(){
  const input = document.getElementById("aiText");
  const text = (input.value || "").trim();
  if(!text) return;

  const chat = document.getElementById("chatArea");
  chat.innerHTML += `<div class="ai-user">${escapeHtml(text)}</div>`;
  input.value = "";

  const reply = smartReply(text);
  setTimeout(() => {
    chat.innerHTML += `<div class="ai-msg">${reply}</div>`;
    chat.scrollTop = chat.scrollHeight;
  }, 250);

  chat.scrollTop = chat.scrollHeight;
}

function smartReply(text){
  const t = text.toLowerCase();

  if(t.includes("uat") || t.includes("testing") || t.includes("qa")){
    return "Jessima has hands-on experience coordinating UAT, validating acceptance criteria, and partnering closely with QA and engineering to ensure release readiness.";
  }

  if(t.includes("jira") || t.includes("confluence") || t.includes("documentation")){
    return "Jessima is strong in structured documentation and delivery execution—writing clear user stories/epics, managing JIRA workflows, and producing decision summaries and artifacts in Confluence.";
  }

  if(t.includes("cms") || t.includes("sitecore")){
    return "Jessima has strong CMS experience (including Sitecore) and has used it to implement mitigations, coordinate fixes, and support platform/admin teams during production issues.";
  }

  if(t.includes("api") || t.includes("postman")){
    return "Jessima has worked with APIs and tools like Postman for validation/testing and collaborates with engineering to ensure integrations and feature behavior meet requirements.";
  }

  if(t.includes("stakeholder") || t.includes("requirements") || t.includes("workshop")){
    return "Jessima regularly leads cross-functional workshops, aligns stakeholders, translates needs into stories, and drives clarity from discovery through delivery.";
  }

  if(t.includes("start") || t.includes("available")){
    return "Jessima is currently employed and can start in ~2 weeks.";
  }

  // default response
  return "Good question. Jessima is a delivery-focused PM/PO who combines product execution with technical depth—especially around stakeholder alignment, documentation, UAT readiness, and platform stabilization.";
}

function escapeHtml(str){
  return str.replace(/[&<>"']/g, m => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));
}
